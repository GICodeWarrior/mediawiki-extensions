                                Switchboard
                                =========== 

Welcome to switchboard.  switchboard is a FastCGI proxy that starts setuid PHP
processes on demand, in a similar manner to Apache suexec.  switchboard allows
mass PHP hosting environments to improve security by running PHP scripts as
the owner instead of the web server user, without the overhead (compared to
mod_php) that other solutions like mod_suphp have.

switchboard has been tested with Sun Java System Web Server 7.0 on Linux and
Solaris, and Apache 2.2.9 on Linux.

switchboard was written by River Tarnell <river@wikimedia.org> for the Wikimedia
Toolserver <http://toolserver.org/>.

Installing switchboard
----------------------

Copy "Makefile.config.example" to "Makefile.config", edit it as appropriate, and
run 'make'.  Run 'make install' to install it.

switchboard requires Boost <http://www.boost.org/> and Apache log4cxx 
<http://logging.apache.org/log4cxx/index.html> to build.  Only the Boost headers
are required, not the compiled libraries.

Running switchboard
-------------------

Configuration files are placed in /etc/switchboard.  You will need to create
main.conf and log.conf based on the example files, and edit them for your
environment.

Configuring the web server
--------------------------

To use switchboard, you need to configure your web server to send PHP requests
to switchboard.  For Apache mod_fastcgi, something like this should work:

  AddHandler php-fastcgi .php
  Action php-fastcgi /cgi/php
  FastCgiConfig -idle-timeout 300
  FastCgiExternalServer /var/www/cgi/php -host localhost:850 -idle-timeout 300

For Sun Java System Web Server:

  Service fn="responder-fastcgi" type="application/x-php" bind-path="localhost:850" reuse-connection="false"

For other web servers, you will need to determine the correct value of 'server-type'
in main.conf.  The difference between them is 'apache' uses the PATH_TRANSLATED
variable to locate the script, while 'sjs' uses SCRIPT_NAME.  If you succeed in
using switchboard with another web server, please file a feature request for your
web server, describing how you did it.

Bugs, feature requests
----------------------

Please report bugs and feature requests at <https://jira.toolserver.org/browse/SWTCH>.
