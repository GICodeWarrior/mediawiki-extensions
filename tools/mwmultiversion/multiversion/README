See http://wikitech.wikimedia.org/view/Heterogeneous_deployment
