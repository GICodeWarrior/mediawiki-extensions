diff -Nur php5-5.2.4/ext/standard/php_rand.h php5-5.2.4.new/ext/standard/php_rand.h
--- php5-5.2.4/ext/standard/php_rand.h	2007-01-01 04:36:08.000000000 -0500
+++ php5-5.2.4.new/ext/standard/php_rand.h	2008-07-15 17:06:07.000000000 -0400
@@ -49,7 +49,7 @@
 #ifdef PHP_WIN32
 #define GENERATE_SEED() ((long) (time(0) * GetCurrentProcessId() * 1000000 * php_combined_lcg(TSRMLS_C)))
 #else
-#define GENERATE_SEED() ((long) (time(0) * getpid() * 1000000 * php_combined_lcg(TSRMLS_C)))
+#define GENERATE_SEED() (((long) (time(0) * getpid())) ^ ((long) (1000000.0 * php_combined_lcg(TSRMLS_C))))
 #endif
 
 PHPAPI void php_srand(long seed TSRMLS_DC);
