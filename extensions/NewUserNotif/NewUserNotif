NEW USER EMAIL NOTIFICATION EXTENSION

	Version 1.2
	Â© 2006 Rob Church

This is free software licensed under the GNU General Public License. Please
see http://www.gnu.org/copyleft/gpl.html for further details, including the
full text and terms of the license.

== Overview ==

	1. Introduction
	2. Installing the extension
	3. Editing the notification email
	4. Further configuration
	5. Notes
	6. Thanks
	
== 1. Introduction ==

The new user email notification extension provides a clean and customisable
means to send email messages to one or more registered users upon the creation
of a user account. The behaviour of the extension can be controlled using
configuration options within the LocalSettings.php file for MediaWiki.

== 2. Installing the extension ==

To install the new user email notification extension, first upload/copy the
extension file NewUserNotif.php into your MediaWiki extensions directory. Then
edit your LocalSettings.php file and add the following line:

	require_once( 'extensions/NewUserNotif.php' );

Save the file (uploading if applicable) to complete the installation.

== 3. Editing the notification email ==

When preparing the email message to be sent to each recipient, the extension
relies upon two system messages. You will need to create these if you wish
to customise them, as detailed below:

MediaWiki:Newusernotifsubj
	This file contains the subject line for the email.
	$1 is replaced with the wiki site name from $wgSitename.

MediaWiki:Newusernotifbody
	This file contains the body text for the email.
	$1 is replaced with the username of the recipient;
	$2 is replaced with the username of the new user account;
	$3 is replaced with the wiki site name from $wgSitename;
	$4 is replaced with the time and date of the account's creation.

== 4. Further configuration ==

The behaviour of the extension can be tweaked using three configuration
variables. To override the defaults for these, set them in LocalSettings.php
underneath the call to the extension file.

$wgNewUserNotifSender
	Email address of the sender of the email
	Defaults to the value of $wgPasswordSender

$wgNewUserNotifTargets
	Array containing the user IDs of those who should receive a notification
	Defaults to the first user (usually the wiki's primary administrator)

	Note: When overriding this variable, include at least one ID value in order
	for a notification to be generated at all. A user's ID can be found by
	accessing Special:Preferences when logged in, or by checking the user_id
	field in the users table.
	
$wgNewUserNotifEmailTargets
	Array containing email addresses to which a notification should also be sent
	Defaults to no additional addresses

== 5. Notes ==

* On wikis where email address authentication is present and active(1), then
  no email is sent unless the recipient's email address is validated.

(1) => MediaWiki 1.6 and later

== 6. Thanks... ==

	* Aculver from #mediawiki, who requested the extension in the first place
	* Avar, for providing an invaluable tip regarding formatting timestamps
	* RedACE from #mediawiki, who requested the external email addresses feature

	All feedback welcome via <robchur@gmail.com>.
	
== 7. Change Log ==

Version 1.1
17/02/2006
	Added external email addresses feature
	
Version 1.2
30/04/2006
	Update to work with new hook format in MediaWiki 1.7
	Fix date/time handling